</html><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= doctor.firstname %> <%= doctor.lastname %> || Profile</title>
    <style>
        .overlay {
          position: fixed;
          top: 0;
          bottom: 0;
          left: 0;
          right: 0;
          background: rgba(0, 0, 0, 0.7);
          transition: opacity 500ms;
          visibility: hidden;
          opacity: 0;
        }
        .overlay:target {
          visibility: visible;
          opacity: 1;
        }
  
        .popup {
          margin: 70px auto;
          padding: 20px;
          background: #fff;
          border-radius: 5px;
          width: 30%;
          position: relative;
          transition: all 5s ease-in-out;
        }
  
        .popup h2 {
          margin-top: 0;
          color: #333;
          font-family: Tahoma, Arial, sans-serif;
        }
        .popup .close {
          position: absolute;
          top: 20px;
          right: 30px;
          transition: all 200ms;
          font-size: 30px;
          font-weight: bold;
          text-decoration: none;
          color: #333;
        }
        .popup .close:hover {
          color: #06d85f;
        }
        .popup .content {
          max-height: 80%;
          overflow: auto;
        }
      </style>
</head>
<body>
    <form action="/logout/doctor">
      <input type="submit" value="LOGOUT">
    </form>
    <%= msg %>
    <center>
        <img style="width: 300px; height: 300px; border-radius: 50%;" src="<%= doctor.profilePicture %>" alt="<%= doctor.firstname %> <%= doctor.lastname %>">
        <br>
        <a href="#UpdateProfilePicture">Update Profile Picture</a>
        <br>
        <h3>Dr. <%= doctor.firstname %> <%= doctor.lastname %></h3>
        <% if (doctor.permitApprove == true && doctor.identityApprove == true) { %>
            <p><b>Status: </b>Approved</p>
        <% } else { %>
            <p><b>Status: </b>Pending</p>
        <% } %>
        <% const birth = doctor.dob %>
        <% const yob = birth.slice(0, 4) %>
        <% const yobN = parseInt(yob, 10) %>
        <% const date = new Date() %>
        <% const realDate = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDay() %>
        <% const realYear = realDate.slice(0, 4) %>
        <% const now = parseInt(realYear, 10) %>
        <% const age = now - yobN %>             
        <p><b>Email:</b> <%= doctor.email %></p>
        <p><b>Gender:</b> <%= doctor.gender %></p>
        <p><b>Age:</b> <%= age %></p>
        <p><b>Address:</b> <%= doctor.address %></p>
        <p><b>State Of Origin:</b> <%= doctor.stateOfOrigin %></p>
        <p><b>Marital Status:</b> <%= doctor.maritalStatus %></p>
        <br>
            <a href="#UpdateProfile">Update Profile Info</a>
        <br>
        <div style="display: flex; width: 100%; height: 500px; justify-content: space-around;">
            <div style="display: flex; flex-direction: column; height: 450px; width: 40%;">
              <% const ext = doctor.permit.slice(-4) %>
              <% if (ext == '.jpg' || ext == '.png' || ext == 'jpeg') { %>
                <a href="<%= doctor.permit %>" style="width: 100%; height: 100%; border-radius: 10%; margin-bottom: 10px;"><img style="width: 100%; height: 100%; border-radius: 10%; margin-bottom: 10px;" src="<%= doctor.permit %>" alt="<%= doctor.firstname %> <%= doctor.lastname %>"></a>
              <% } else if (ext == '.pdf' || ext == '.doc' || ext == '.ppt' || ext == 'docx') { %>
                <a href="<%= doctor.permit %>" style="width: 100%; height: 100%; border-radius: 10%; margin-bottom: 10px;"><img style="width: 100%; height: 100%; border-radius: 10%; margin-bottom: 10px;" src="/images/static_img.png" alt="<%= doctor.firstname %> <%= doctor.lastname %>"></a>
              <% } %>
                <a href="#UpdatePermit">Update Permit Document</a>
            </div>
            <div style="display: flex; flex-direction: column; height: 450px; width: 40%;">
              <% if (ext == '.jpg' || ext == '.png' || ext == 'jpeg') { %>
                <a href="<%= doctor.identity %>" style="width: 100%; height: 100%; border-radius: 10%; margin-bottom: 10px;"><img style="width: 100%; height: 100%; border-radius: 10%; margin-bottom: 10px;" src="<%= doctor.identity %>" alt="<%= doctor.firstname %> <%= doctor.lastname %>"></a>
              <% } else if (ext == '.pdf' || ext == '.doc' || ext == '.ppt' || ext == 'docx') { %>
                <a href="<%= doctor.identity %>" style="width: 100%; height: 100%; border-radius: 10%; margin-bottom: 10px;"> <img style="width: 100%; height: 100%; border-radius: 10%; margin-bottom: 10px;" src="/images/static_img.png" alt="<%= doctor.firstname %> <%= doctor.lastname %>"></a>
              <% } %>
                <a href="#UpdateIdentity">Update Identity Document</a>
            </div>
        </div>
    </center>

        <div id="UpdateProfile" class="overlay">
            <div class="popup">
              <a class="close" href="">&times;</a>
              <div class="content">
                <h1>Update Profile</h1>
                <p><%= msg %></p>
                <form action="/view/info/<%= doctor.uniqueID %>" method="post" enctype="multipart/form-data">
                    <!-- <label for="profilePicture">Profile Picture: </label>
                    <input type="file" name="profilePicture" id="profilePicture">
                    <br> -->
                    <label for="firstname">Firstname: </label>
                    <input type="text" name="firstname" id="firstname" value="<%= doctor.firstname %>" required>
                    <br>
                    <label for="lastname">Lastname: </label>
                    <input type="text" name="lastname" id="lastname" value="<%= doctor.lastname %>" required>
                    <br>
                    <label for="gender">Gender: </label>
                    <select name="gender" id="gender" required>
                        <option value="<%= doctor.gender %>"><%= doctor.gender %></option>
                        <% if (doctor.gender == 'Male') { %>
                            <option value="Female">Female</option>
                        <% } else { %>
                            <option value="Female">Male</option>
                        <% } %> 
                    </select>
                    <br>
                    <label for="email">Email: </label>
                    <input type="email" name="email" id="email" value="<%= doctor.email %>" required>
                    <br>
                    <label for="dob">Date of Birth: </label>
                    <input type="date" name="dob" id="dob" value="<%= doctor.dob %>" required>
                    <br>
                    <label for="address">Current Address: </label>
                    <input type="text" name="address" id="address" value="<%= doctor.address %>" required>
                    <br>
                    <label for="stateOfOrigin">State of Origin: </label>
                      <select name="stateOfOrigin" id="stateOfOrigin" required>
                        <option selected value="<%= doctor.stateOfOrigin %>"><%= doctor.stateOfOrigin %></option>
                        <option value="Abia">Abia</option>
                        <option value="Adamawa">Adamawa</option>
                        <option value="Akwa Ibom">Akwa Ibom</option>
                        <option value="Anambra">Anambra</option>
                        <option value="Bauchi">Bauchi</option>
                        <option value="Bayelsa">Bayelsa</option>
                        <option value="Benue">Benue</option>
                        <option value="Borno">Borno</option>
                        <option value="Cross River">Cross River</option>
                        <option value="Delta">Delta</option>
                        <option value="Ebonyi">Ebonyi</option>
                        <option value="Edo">Edo</option>
                        <option value="Ekiti">Ekiti</option>
                        <option value="Enugu">Enugu</option>
                        <option value="FCT">Federal Capital Territory</option>
                        <option value="Gombe">Gombe</option>
                        <option value="Imo">Imo</option>
                        <option value="Jigawa">Jigawa</option>
                        <option value="Kaduna">Kaduna</option>
                        <option value="Kano">Kano</option>
                        <option value="Katsina">Katsina</option>
                        <option value="Kebbi">Kebbi</option>
                        <option value="Kogi">Kogi</option>
                        <option value="Kwara">Kwara</option>
                        <option value="Lagos">Lagos</option>
                        <option value="Nasarawa">Nasarawa</option>
                        <option value="Niger">Niger</option>
                        <option value="Ogun">Ogun</option>
                        <option value="Ondo">Ondo</option>
                        <option value="Osun">Osun</option>
                        <option value="Oyo">Oyo</option>
                        <option value="Plateau">Plateau</option>
                        <option value="Rivers">Rivers</option>
                        <option value="Sokoto">Sokoto</option>
                        <option value="Taraba">Taraba</option>
                        <option value="Yobe">Yobe</option>
                        <option value="Zamfara">Zamfara</option>
                    </select>
                    <br>
                    <label for="maritalStatus">Marital Status: </label>
                    <select name="maritalStatus" id="maritalStatus" required>
                      <option selected value="<%= doctor.maritalStatus %>"><%= doctor.maritalStatus %></option>
                      <option value="married">Married</option>
                      <option value="single">Single</option>
                      <option value="Divorced">Divorced</option>
                      <option value="seperated">Separated</option>
                    </select>
                    <br>
                    <input type="submit" value="Update">
                </form>
              </div>
            </div>
          </div>


        <div id="UpdateProfilePicture" class="overlay">
            <div class="popup">
              <a class="close" href="">&times;</a>
              <div class="content">
                <h1>Update Profile Picture</h1>
                <p><%= msg %></p>
                <form action="/view/profilePic/<%= doctor.uniqueID %>" method="post" enctype="multipart/form-data">
                    <label for="profilePicture">Profile Picture: </label>
                    <input type="file" name="profilePicture" id="profilePicture" required>
                    <br>
                    <input type="submit" value="Update">
                </form>
              </div>
            </div>
          </div>


        <div id="UpdatePermit" class="overlay">
            <div class="popup">
              <a class="close" href="">&times;</a>
              <div class="content">
                <h1>Update Permit Document</h1>
                <p><%= msg %></p>
                <form action="/view/permit/<%= doctor.uniqueID %>" method="post" enctype="multipart/form-data">
                    <label for="permit">Permit Document: </label>
                    <input type="file" name="permit" id="permitDocument" required>
                    <br>
                    <input type="submit" value="Update">
                </form>
              </div>
            </div>
          </div>


        <div id="UpdateIdentity" class="overlay">
            <div class="popup">
              <a class="close" href="">&times;</a>
              <div class="content">
                <h1>Update Identity Document</h1>
                <p><%= msg %></p>
                <form action="/view/identity/<%= doctor.uniqueID %>" method="post" enctype="multipart/form-data">
                    <label for="identity">Identity Document: </label>
                    <input type="file" name="identity" id="identityDocument" required>
                    <br>
                    <input type="submit" value="Update">
                </form>
              </div>
            </div>
          </div>
</body>
</html>